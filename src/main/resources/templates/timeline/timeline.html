<!DOCTYPE html>
<html 
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/defaultLayout}">
<section layout:fragment="content" class="contents d-flex justify-content-center">
	<div class="contents-box">
		<a href="/post/post-create-view" class="comment-btn btn btn-light w-100  form-contorl">
			<div th:if="${session.userId != null}" class="write-box">
				<div class="d-flex justify-content-end mt-2" placeholder="댓글 달기">
					<button id="btn" class="btn">작성하기</button>
				</div>
			<!-- <div class="d-flex justify-content-between">
			</div> -->
			</div>
		</a>
		
		<!-- 타임라인 영역 -->
		<div class="timeline-box my-5">
			
			<!-- 글(카드) 반복 -->
			<div th:each="cardView : ${cardViewList}" class="card border rounded mt-3">
				<!-- 글쓴이, 더보기(삭제) -->
				<div class="p-2 d-flex justify-content-between">
					<span class="font-weight-bold" th:text="${cardView.user.loginId}">글쓴이</span>
					
					<!-- 더보기 ...(로그인 된 사람과 글쓴이 정보 일치할 때 보이게) -->
					<a th:if="${session.userId == cardView.post.userId}" href="#" class="more-btn" th:data-post-id="${cardView.post.id}" data-toggle="modal" data-target="#modal">
						<img src="https://www.iconninja.com/files/860/824/939/more-icon.png" width="30">
					</a>
				</div>
				
				<!-- 본문 이미지 -->
				<div class="card-img">
					<img th:src="${cardView.post.imagePath}" class="w-100" alt="본문 이미지">
				</div>
				
				<!-- 좋아요 -->
				<div class="card-like m-3">
					<a href="#" class="like-btn" th:data-post-id="${cardView.post.id}">
						<img th:if="${cardView.filledLike == false}" src="https://www.iconninja.com/files/214/518/441/heart-icon.png" width="18" height="18" alt="empty heart">
						<img th:unless="${cardView.filledLike == false}" src="https://www.iconninja.com/files/527/809/128/heart-icon.png" width="18" height="18" alt="filled heart">
					</a>
					<span th:text="|좋아요 ${cardView.likeCount}개|"></span>
				</div>
				
				<!-- 글 -->
				<div class="card-post m-3">
					<span class="font-weight-bold" th:text="${cardView.user.loginId}">글쓴이</span>
					<span th:text="${cardView.post.content}">글 내용입니다!!!!</span>
				</div>
				
				<!-- 댓글 제목 -->
				<div class="card-comment-title border-bottom">
					<div class="font-weight-bold ml-3 mb-1">댓글</div>
				</div>
				
				<!-- 댓글 목록 -->
				<div class="card-comment-list m-2">
					<!-- 댓글들 -->
					<div class="card-comment m-1" th:each="commentView : ${cardView.commentList}">
						<span class="font-weight-bold" th:text="${commentView.user.loginId}">댓글쓰니</span>
						<span th:text="${commentView.comment.content}">댓글 내용임</span>
						
						<!-- 댓글 삭제(자신의 댓글만 가능) -->
						<a href="#" class="comment-del-btn" th:if="${session.userId == commentView.comment.userId}" th:data-comment-id="${commentView.comment.id}">
							<img src="https://www.iconninja.com/files/603/22/506/x-icon.png" width="10" height="10">
						</a>
					</div>
					
					<!-- 댓글 쓰기 -->
					<div class="comment-write d-flex border-top mt-2">
						<input type="text" class="comment-input form-control border-0 mr-2" placeholder="댓글 달기">
						<button type="button" class="comment-btn btn btn-light" th:data-post-id="${cardView.post.id}" th:data-user-id="${session.userId}">게시</button>
					</div>
				</div> <!-- 댓글 끝 -->
			</div> <!-- 카드 끝 -->
		</div> <!-- 타임라인 박스 끝 -->
		
		<!-- Modal: 타임리프 레이아웃 때문에 section 태그 안쪽에 위치 -->
		<div class="modal fade" id="modal">
			<!-- modal-sm:작은 모달창, modal-dialog-centered:수직 가운데 정렬 -->
			<div class="modal-dialog modal-sm modal-dialog-centered">
				<div class="modal-content text-center">
		      		<div class="py-3">
		      			<a href="#" id="postDeleteBtn">삭제하기</a>
		      		</div>
		      		<div class="py-3 border-top">
		      			<a href="#" data-dismiss="modal">취소</a>
		      		</div>
				</div>
			</div>
		</div>
	</div>
</section>

<th:block layout:fragment="script">
    <script>
    </script>
</th:block>